@using ASP.Net_Forum.Domain.ViewModels.Tag;

@model List<TagCreateViewModel>

@{
    ViewData["Title"] = "AdminMenu";
}

@if (Model.Count == 0)
{
    <h2>Тэгов нет</h2>

    <button class="p-3 m-1 btn-primary bg-primary" id="btn-show-add">Добавить тэг</button> <br>

    <input class="p-2 m-1 d-none" id="input" name="Name" type="text" placeholder="Имя тэга" /> <br>
    <button class="p-3 m-1 btn-primary bg-primary d-none" id="btn-add">Добавить</button>
}
else
{
    <div class="row">

        <div class="row">

            <h2>Существующие тэги</h2>

            <div class="p-2 mb-2 d-flex border rounded-1">

                @foreach (var item in Model)
                {
                    <div class="m-1 p-1 border-1 rounded-1" style="background-color:lightgrey" >@item.Name</div>
                }

            </div>

            <button class="p-3 m-1 btn-primary bg-primary" type="submit" id="btn-show-add">Добавить тэг</button> <br>


            <h3 class="ms-5 p-1 d-none" id="LabelAddTag">Добавление тэга</h3>
            <input class="p-2 m-1 d-none" id="input" name="Name" type="text" placeholder="Имя тэга" /> <br>
            <button class="p-3 m-1 btn-primary bg-primary d-none" id="btn-add">Добавить</button>

        </div>

    </div>

}




@section Scripts{
	<script>
        console.log('sda');
		$(function() 
        {
            console.log('asdas');
            $('#btn-show-add').on('click', function (e) 
            {
                console.log('1');
                var input = $('input');
                var btn_add = $('#btn-add');
                var labelAdd = $('#LabelAddTag');

                 console.log('sdfdsd');

                 if (input.hasClass('d-none') || btn_add.hasClass('d-none')) {
                    input.addClass('d-block').removeClass('d-none');
                    btn_add.addClass('d-block').removeClass('d-none');
                    labelAdd.addClass('d-block').removeClass('d-none');
                 }
                $('#btn-show-add').hide();
                e.preventDefault();
				 
			});

            $('#btn-add').on('click', function (e) 
            {
				 e.preventDefault();
                 var name = $('#input').val();
                 console.log(name);
			     $.ajax(
                 {
                     url: '@Url.Action("Create","Tag")?Name=' + name,
					 type: 'POST',
				 });
			});
		});
	</script>
}
